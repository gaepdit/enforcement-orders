@page
@using Enfo.Domain.Users
@model IndexModel
@{
    ViewData["Title"] = "Account Profile";
}

<h1>@ViewData["Title"]</h1>
<h2>@Model.DisplayStaff?.Name</h2>
<p>
    <strong>Email:</strong> @Model.DisplayStaff?.Email
</p>

<h3>Roles</h3>
<p>Your account has the following application roles:</p>

<div class="gaepd-container-light">
    @if (Model.Roles is { Count: > 0 })
    {
        <dl>
            @foreach (var role in Model.Roles)
            {
                if (AppRole.AllRoles.TryGetValue(role, out var userRole))
                {
                    <dt>@userRole?.DisplayName</dt>
                    <dd>
                        <small class="gaepd-text-muted">@userRole?.Description</small>
                    </dd>
                }
            }
        </dl>
    }
    else
    {
        <p>
            <strong>None (view only)</strong>
        </p>
    }
</div>

<form asp-page="./Logout" asp-route-returnUrl="@Url.Page("/")" method="post">
    <button type="submit" class="usa-button-red">Sign out</button>
</form>

<environment include="Local,Development">
    <h3>Claims</h3>
    <div class="gaepd-container-light">
        <dl>
            @foreach (var claim in Model.Claims)
            {
                <dt>@claim.Type</dt>
                <dd class="gaepd-text-muted">@claim.Value</dd>
            }
        </dl>
    </div>
</environment>